var mlsInfo={};mlsInfo.apiUrl="https://sheetsu.com/apis/v1.0/90c54b608efe",mlsInfo.playersObject={},mlsInfo.teamsDuplicates=[],mlsInfo.teams=[],mlsInfo.playersSorted=[],mlsInfo.teamsStanding=[],mlsInfo.numberWithCommas=function(a){return a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},mlsInfo.init=function(){mlsInfo.getData()},mlsInfo.getData=function(){$.ajax({url:mlsInfo.apiUrl,method:"GET",dataType:"json"}).then(function(a){mlsInfo.playersObject=a,mlsInfo.getTeams(a)})},mlsInfo.getTeams=function(){for(var a=0;a<mlsInfo.playersObject.length;a++)mlsInfo.teamsDuplicates.push(mlsInfo.playersObject[a].Club);$.each(mlsInfo.teamsDuplicates,function(a,e){$.inArray(e,mlsInfo.teams)===-1&&mlsInfo.teams.push(e)}),mlsInfo.teamSelect(),mlsInfo.teamArrays()},mlsInfo.teamArrays=function(){for(var a=0;a<mlsInfo.teams.length;a++){mlsInfo.playersSorted[mlsInfo.teams[a]]=[];for(var e=0;e<mlsInfo.playersObject.length;e++)mlsInfo.playersObject[e].Club===mlsInfo.teams[a]&&mlsInfo.playersSorted[mlsInfo.teams[a]].push(mlsInfo.playersObject[e])}mlsInfo.sortTeamsStanding()},mlsInfo.populateSelect=function(){for(var a=0;a<mlsInfo.teams.length;a++)$("#teamSelect").append('<option value"'+mlsInfo.teams[a]+'">'+mlsInfo.teams[a]+"</option>");mlsInfo.fieldChange()},mlsInfo.fieldChange=function(){$("#teamSelect").on("change",function(){var a=$("#teamSelect").val(),e=mlsInfo.playersSorted[a];"Select Team"!==a&&($("#playersTable").empty(),$("#teamsTable").empty(),e.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),mlsInfo.printInfo(e),mlsInfo.printTeamNumbers(e))})},mlsInfo.teamSelect=function(){$('input[name="team"]').change(function(){var a=$("input[name=team]:checked").val();console.log(a);var e=mlsInfo.playersSorted[a];mlsInfo.selectedTeamLogo=$("input[name=team]:checked + label > img").attr("src"),$("#playersTable").empty(),$("#teamsTable").empty(),e.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),mlsInfo.printInfo(e),mlsInfo.printTeamNumbers(e,a),$(".hero-header").slideUp(800)})},mlsInfo.printInfo=function(a){var e="<div class='dp-icon'>DP</div>",n="<div class='dp-icon'>YDP</div>",t=$("<td>").append("Player"),s=$("<td>").append("Position"),l=$("<td>").append("Base Salary"),o=$("<td>").append("Compensation"),m=$("<td>").append("Salary Cap Hit"),r=$("<tr>").append(t,s,l,o,m);$("#playersTable").append(r);for(var p=0;p<a.length;p++){var f=$("<td>").append(a[p].FirstName+" "+a[p].LastName),i=$("<td>").append(a[p].Pos),d=$("<td>").append(a[p].BaseSalary),I=$("<td>").append(a[p].Compensation),c=$("<td>").append(a[p].SalaryCapHit);"DP"===a[p].Status&&"Y"===a[p].Young?f=$("<td>").append(a[p].FirstName+" "+a[p].LastName+n):"DP"===a[p].Status&&(f=$("<td>").append(a[p].FirstName+" "+a[p].LastName+e));var S=$("<tr>").append(f,i,d,I,c);$("#playersTable").append(S)}},mlsInfo.printTeamNumbers=function(a,e){console.log(a);var n=a.slice(0,17);console.log(n);for(var t=366e4,s=0,l=0,o=0;o<a.length;o++)var l=l+parseInt(a[o].BaseSalaryNUM,10);for(var o=0;o<n.length;o++)var s=s+parseInt(n[o].SalaryCapHitNUM,10);var m=t-s,r=mlsInfo.numberWithCommas(s);console.log(r);var p=mlsInfo.numberWithCommas(t);console.log(p);var f=mlsInfo.numberWithCommas(m);console.log(f);var i=mlsInfo.numberWithCommas(l);console.log(i);for(var d=0,o=0;o<a.length;o++)"DP"===a[o].Status&&(d+=1,console.log(d));var I=$("<h1>").append(e);$(".team-name h1").replaceWith(I);var c=$("<h2>").append("$"+i);$(".team-total-salary h2").replaceWith(c);var S=$("<h2>").append("$"+r);$(".team-cap-hit h2").replaceWith(S);var g=$("<h2>").append("$"+f);$(".team-cap-space h2").replaceWith(g);var u=$("<h2>").append(d);$(".team-dps h2").replaceWith(u);var y=$("<img>").attr("src",mlsInfo.selectedTeamLogo);$(".team-emblem").empty().append(y)},mlsInfo.sortTeamsStanding=function(){for(var a=0;a<mlsInfo.teams.length;a++){for(var e=0,n=0,t=0;t<mlsInfo.playersSorted[mlsInfo.teams[a]].length;t++){mlsInfo.teamsStanding[a]={};var e=parseInt(e,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][t].BaseSalaryNUM,10),n=parseInt(n,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][t].SalaryCapHitNUM,10)}mlsInfo.teamsStanding[a].totalCapSalaryMass=n,mlsInfo.teamsStanding[a].totalSalaryMass=e,mlsInfo.teamsStanding[a].teamName=mlsInfo.teams[a]}mlsInfo.teamsStanding.sort(function(a,e){return console.log("works"),parseFloat(e.totalSalaryMass)-parseFloat(a.totalSalaryMass)});for(var t=0;t<mlsInfo.teamsStanding.length;t++)mlsInfo.teamsStanding[t].totalSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[t].totalSalaryMass),mlsInfo.teamsStanding[t].totalCapSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[t].totalCapSalaryMass);console.log(mlsInfo.teamsStanding),mlsInfo.printTeamsStanding()},mlsInfo.printTeamsStanding=function(){$("#teamsStandingTable").empty();var a=$("<td>").append("Team"),e=$("<td>").append("Total Team Salary"),n=$("<tr>").append(a,e);$("#teamsStandingTable").append(n);for(var t=0;t<mlsInfo.teamsStanding.length;t++){var s=$("<td>").append(mlsInfo.teamsStanding[t].teamName),l=$("<td>").append(mlsInfo.teamsStanding[t].totalSalaryMass),o=$("<tr>").append(s,l);$("#teamsStandingTable").append(o)}},$(function(){mlsInfo.init()});
