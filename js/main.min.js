var mlsInfo={};mlsInfo.apiUrl="https://sheetsu.com/apis/v1.0/90c54b608efe",mlsInfo.playersObject={},mlsInfo.teamsDuplicates=[],mlsInfo.teams=[],mlsInfo.playersSorted=[],mlsInfo.teamsStanding=[],mlsInfo.numberWithCommas=function(a){return a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},mlsInfo.init=function(){mlsInfo.getData()},mlsInfo.getData=function(){$.ajax({url:mlsInfo.apiUrl,method:"GET",dataType:"json"}).then(function(a){mlsInfo.playersObject=a,mlsInfo.getTeams(a)})},mlsInfo.getTeams=function(){for(var a=0;a<mlsInfo.playersObject.length;a++)mlsInfo.teamsDuplicates.push(mlsInfo.playersObject[a].Club);$.each(mlsInfo.teamsDuplicates,function(a,n){$.inArray(n,mlsInfo.teams)===-1&&mlsInfo.teams.push(n)}),mlsInfo.populateSelect(),mlsInfo.teamArrays()},mlsInfo.teamArrays=function(){for(var a=0;a<mlsInfo.teams.length;a++){mlsInfo.playersSorted[mlsInfo.teams[a]]=[];for(var n=0;n<mlsInfo.playersObject.length;n++)mlsInfo.playersObject[n].Club===mlsInfo.teams[a]&&mlsInfo.playersSorted[mlsInfo.teams[a]].push(mlsInfo.playersObject[n])}mlsInfo.sortTeamsStanding()},mlsInfo.populateSelect=function(){for(var a=0;a<mlsInfo.teams.length;a++)$("#teamSelect").append('<option value"'+mlsInfo.teams[a]+'">'+mlsInfo.teams[a]+"</option>");mlsInfo.fieldChange()},mlsInfo.fieldChange=function(){$("#teamSelect").on("change",function(){var a=$("#teamSelect").val(),n=mlsInfo.playersSorted[a];"Select Team"!==a&&($("#playersTable").empty(),$("#teamsTable").empty(),n.sort(function(a,n){return parseFloat(n.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),mlsInfo.printInfo(n),mlsInfo.printTeamNumbers(n))})},mlsInfo.printInfo=function(a){var n=$("<td>").append("Player"),t=$("<td>").append("Position"),e=$("<td>").append("Club"),s=$("<td>").append("Base Salary"),l=$("<td>").append("Compensation"),o=$("<td>").append("Salary Cap Hit"),m=$("<td>").append("Status"),p=$("<tr>").append(n,t,e,s,l,m,o);$("#playersTable").append(p);for(var r=0;r<a.length;r++){var f=$("<td>").append(a[r].FirstName+" "+a[r].LastName),d=$("<td>").append(a[r].Pos),i=$("<td>").append(a[r].Club),I=$("<td>").append(a[r].BaseSalary),S=$("<td>").append(a[r].Compensation),g=$("<td>").append(a[r].SalaryCapHit);if("DP"===a[r].Status&&"Y"===a[r].Young)var y=$("<td>").append("Young Designated Player");else if("DP"===a[r].Status)var y=$("<td>").append("Designated Player");else var y=$("<td>").append("Regular");var u=$("<tr>").append(f,d,i,I,S,y,g);$("#playersTable").append(u)}},mlsInfo.printTeamNumbers=function(a){console.log(a);var n=a.slice(0,20);console.log(n);for(var t=366e4,e=0,s=0,l=0;l<a.length;l++)var s=s+parseInt(a[l].BaseSalaryNUM,10);for(var l=0;l<n.length;l++)var e=e+parseInt(n[l].SalaryCapHitNUM,10);var o=t-e,m=mlsInfo.numberWithCommas(e);console.log(m);var p=mlsInfo.numberWithCommas(t);console.log(p);var r=mlsInfo.numberWithCommas(o);console.log(r);var f=mlsInfo.numberWithCommas(s);console.log(f);var d=$("<td>").append("Top 20 Salary Mass"),i=$("<td>").append("Salary Cap (2016)"),I=$("<td>").append("Space on Cap"),S=$("<td>").append("Total Salary Mass"),g=$("<tr>").append(d,i,I,S);$("#teamsTable").append(g);var y=$("<td>").append("$"+m),u=$("<td>").append("$"+p),c=$("<td>").append("$"+r),v=$("<td>").append("$"+f),b=$("<tr>").append(y,u,c,v);$("#teamsTable").append(b)},mlsInfo.sortTeamsStanding=function(){for(var a=0;a<mlsInfo.teams.length;a++){for(var n=0,t=0,e=0;e<mlsInfo.playersSorted[mlsInfo.teams[a]].length;e++){mlsInfo.teamsStanding[a]={};var n=parseInt(n,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][e].BaseSalaryNUM,10),t=parseInt(t,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][e].SalaryCapHitNUM,10)}mlsInfo.teamsStanding[a].totalCapSalaryMass=t,mlsInfo.teamsStanding[a].totalSalaryMass=n,mlsInfo.teamsStanding[a].teamName=mlsInfo.teams[a]}mlsInfo.teamsStanding.sort(function(a,n){return console.log("works"),parseFloat(n.totalSalaryMass)-parseFloat(a.totalSalaryMass)});for(var e=0;e<mlsInfo.teamsStanding.length;e++)mlsInfo.teamsStanding[e].totalSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[e].totalSalaryMass),mlsInfo.teamsStanding[e].totalCapSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[e].totalCapSalaryMass);console.log(mlsInfo.teamsStanding),mlsInfo.printTeamsStanding()},mlsInfo.printTeamsStanding=function(){$("#teamsStandingTable").empty();var a=$("<td>").append("Team"),n=$("<td>").append("Salary Cap Hit"),t=$("<td>").append("Total Salary Mass"),e=$("<tr>").append(a,n,t);$("#teamsStandingTable").append(e);for(var s=0;s<mlsInfo.teamsStanding.length;s++){var l=$("<td>").append(mlsInfo.teamsStanding[s].teamName),o=$("<td>").append(mlsInfo.teamsStanding[s].totalCapSalaryMass),m=$("<td>").append(mlsInfo.teamsStanding[s].totalSalaryMass),p=$("<tr>").append(l,o,m);$("#teamsStandingTable").append(p)}},$(function(){mlsInfo.init()});